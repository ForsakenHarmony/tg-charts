{"version":3,"sources":["data.js","renderer.js","index.js","../node_modules/parcel/src/builtins/bundle-url.js","../node_modules/parcel/src/builtins/css-loader.js","../node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["projectedView","data","maxX","maxY","sStartY","sEndY","lines","cachedOr","map","line","x","y","searchDiff","smallLines","fullLines","labels","label","pos","text","markers","marker","shownLabels","view","selection","binarySearchClosestIdx","thing","lower","offset","length","idx","Math","round","slice","_cache","undefined","interp","n","time","steps","minLines","normalizedView","start","end","xData","fullLabels","startVal","endVal","diff","startBound","endBound","startIdx","endIdx","max","Number","MIN_SAFE_INTEGER","raw","d","i","stepN","digits","log10","base","pow","step","s","filter","nSteps","floor","Array","from","_","viewDiff","labelPadAmt","labelMinN","posOnly","l","invDiff","boundDiff","power","log2","labelN","relStep","r","console","log","Boolean","Object","assign","pregenerate","yData","Date","toDateString","split","join","totalMax","fullYView","totalMaxPerc","cache","currentId","currentIdx","inputs","creator","caller","Error","stack","trim","currentCache","currentValue","cached","value","reduce","acc","val","genData","id","viewPort","rerender","pregen","currView","chart","finder","h","tagName","attributes","children","diffAttrs","element","newAttrs","keys","attrs","name","splice","indexOf","removeAttribute","a","toLowerCase","substr","_listen","addEventListener","eventProxy","setAttribute","e","type","EMPTY_ARR","parent","nodes","isSvg","childNodes","len","childI","isNew","el","removeChild","document","createTextNode","createElementNS","createElement","appendChild","maxChartY","searchStartY","searchEndY","coerceTouches","changedTouches","call","identifier","clientX","target","createChart","stacked","percentage","currentView","touches","svg","mouseDown","preventDefault","classList","mouseUp","mouseMove","buttons","clientWidth","querySelector","getBoundingClientRect","svgStart","svgWidth","width","t","current","touch","delta","left","right","body","gen","graph","xmlns","version","viewBox","class","m","x1","x2","y1","y2","stroke","color","points","height","onMouseDown","onTouchStart","for","checked","queued","charts","render","c","includes","queueRender","requestAnimationFrame","push","queueAll","window","fetchCharts","Promise","all","nr","fetch","then","res","json","columns","colors","names","types","find","y_scaled","bind","bundleURL","getBundleURLCached","getBundleURL","err","matches","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","module","OVERLAY_ID","OldModule","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","handled","assets","forEach","asset","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","overlay","createErrorOverlay","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","isArray","concat","Function","deps","some","cb"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["export function projectedView(data, maxX, maxY, sStartY, sEndY) {\n  const lines = cachedOr([data.lines, maxX, maxY], () => data.lines.map(line => ({\n    ...line,\n    data: line.data.map(([x, y]) => [x * maxX, maxY - y * maxY])\n  })));\n\n  const searchDiff = sEndY - sStartY;\n  const smallLines = cachedOr([data.fullLines, maxX, sStartY, searchDiff], () => data.fullLines.map(line => ({\n    ...line,\n    data: line.data.map(([x, y]) => [\n      x * maxX,\n      sStartY + (searchDiff - y * searchDiff)\n    ])\n  })));\n\n  const labels = cachedOr([data.labels, maxX], () => data.labels.map(label => ({\n    pos: label.pos * maxX,\n    text: label.text\n  })));\n\n  const markers = cachedOr([data.markers, maxY, maxX], () => data.markers.map(marker => ({\n    pos: maxY - marker.pos * maxY,\n    text: marker.text\n  })));\n\n  const shownLabels = cachedOr([data.shownLabels, maxX], () => data.shownLabels.map(label => ({\n    text: label.text,\n    pos: label.pos * maxX\n  })));\n\n  return {\n    lines,\n    smallLines,\n    labels,\n    markers,\n    shownLabels,\n    view: [data.view[0] * maxX, data.view[1] * maxX],\n    selection: null\n  };\n}\n\nfunction binarySearchClosestIdx(data, thing, lower, offset = 0) {\n  if (data.length <= 2) {\n    if (lower) {\n      if (data[0] < thing) {\n        if (data[1] && data[1] < thing) {\n          return offset + 1;\n        }\n        return offset;\n      } else {\n        if (offset === 0) return 0;\n        return offset - 1 || 0;\n      }\n    } else {\n      if (data[0] < thing) {\n        if (data[1] && data[1] < thing) {\n          return offset + 2;\n        }\n        return offset + 1;\n      } else {\n        return offset;\n      }\n    }\n  }\n  if (data.length === 1)\n    return offset + data[0] < thing ? (lower ? 0 : 1) : lower ? -1 : 0;\n  const idx = Math.round(data.length / 2);\n  if (thing < data[idx]) {\n    return binarySearchClosestIdx(data.slice(0, idx), thing, lower, offset);\n  } else {\n    return binarySearchClosestIdx(data.slice(idx), thing, lower, offset + idx);\n  }\n}\n\nlet _cache = undefined;\nfunction interp(n, time) {\n  if (!_cache) {\n    _cache = n;\n    return n;\n  }\n  return n;\n}\n\nconst steps = [10, 5, 1];\nconst minLines = 3;\n\nexport function normalizedView(data, start, end, time) {\n  const { xData, fullLines, fullLabels } = data;\n  const startVal = xData.data[0];\n  const endVal = xData.data[xData.data.length - 1];\n  const diff = endVal - startVal;\n  const startBound = startVal + diff * start;\n  const endBound = startVal + diff * end;\n  const startIdx = cachedOr([xData.data, startBound], () => binarySearchClosestIdx(xData.data, startBound, true));\n  const endIdx = cachedOr([xData.data, endBound], () => binarySearchClosestIdx(xData.data, endBound, false));\n\n  const labels = cachedOr([fullLabels, startIdx, endIdx], () => fullLabels.slice(startIdx, endIdx).map(({ text, pos }) => ({\n    text,\n    pos: (pos - start) / (end - start)\n  })));\n\n  const { lines, max } = cachedOr([fullLines, startIdx, endIdx], () => {\n    let max = Number.MIN_SAFE_INTEGER;\n\n    const lines = fullLines.map(line => ({\n      ...line,\n      data: line.raw.slice(startIdx, endIdx).map(n => (n > max ? (max = n) : n))\n    }));\n  \n    max *= 1.05;\n    max = interp(max, time);\n    max = cachedOr([startIdx, endIdx], () => max);\n  \n    \n    lines.map(line => {\n      line.data = line.data.map((d, i) => [labels[i].pos, d / max]);\n    }); \n\n    return {\n      lines,\n      max\n    };\n  });\n\n  const stepN = max / minLines;\n  const digits = Math.round(Math.log10(stepN));\n  const base = Math.pow(10, digits - 1);\n\n  const step = steps.map(s => base * s).filter(s => s < stepN)[0];\n  const nSteps = Math.floor(max / step) + 1;\n\n  const markers = cachedOr([nSteps, step], () => Array.from({ length: nSteps }, (_, i) => ({\n    text: \"\" + i * step,\n    pos: (i * step) / max\n  })));\n\n  const shownLabels = cachedOr([labels, end, start, diff], () => {\n    const viewDiff = end - start;\n    const labelPadAmt = 0.05;\n    const labelMinN = 5;\n    const posOnly = labels.map(l => l.pos);\n\n    const invDiff = 1 / viewDiff;\n    const boundDiff = (endBound - startBound) * (1 - labelPadAmt * 2);\n    const power = Math.round(Math.log2(boundDiff / labelMinN));\n    const step = Math.pow(2, power);\n    const labelN = Math.floor(boundDiff / step);\n    const relStep = step / boundDiff;\n    const offset = 1 - ((startBound + labelPadAmt * diff) / step) % 1;\n\n    const r = n => Math.round(n*100)/100;\n    console.log('n', r(relStep), r(labelN), r((startBound + labelPadAmt * diff) / step));\n\n    return Array.from({ length: labelN }, (_, i) => {\n      const pos = (offset + i) * relStep;\n      const idx = binarySearchClosestIdx(posOnly, pos, false);\n      \n      return labels[idx] && {\n        text: labels[idx].text,\n        pos: labels[idx].pos\n      }\n    }).filter(Boolean);\n  });\n\n  return Object.assign(\n    {\n      lines,\n      labels,\n      markers,\n      shownLabels,\n      view: [start, end],\n      selection: null\n    },\n    data\n  );\n}\n\nexport function pregenerate(xData, yData) {\n  const startVal = xData.data[0];\n  const endVal = xData.data[xData.data.length - 1];\n\n  const fullLabels = cachedOr([xData.data, startVal, endVal], () => xData.data.map(d => ({\n    text: new Date(d)\n      .toDateString()\n      .split(\" \")\n      .slice(1, 3)\n      .join(\" \"),\n    pos: (d - startVal) / (endVal - startVal),\n    raw: d\n  })));\n\n  const { fullYView, totalMax } = cachedOr([yData], () => {\n    let totalMax = Number.MIN_SAFE_INTEGER;\n    const fullYView = yData.map(line => ({\n      ...line,\n      data: line.data.map(n => (n > totalMax ? (totalMax = n) : n))\n    }));\n    return {\n      totalMax,\n      fullYView,\n    };\n  });\n\n  const totalMaxPerc = totalMax * 0.05;\n  const fullLines = cachedOr([fullYView, totalMaxPerc, fullLabels], () => fullYView.map(line => ({\n    ...line,\n    data: line.data.map((d, i) => [\n      fullLabels[i].pos,\n      (totalMaxPerc + d) / (totalMax + totalMaxPerc * 2)\n    ]),\n    raw: line.data\n  })));\n\n  return {\n    xData,\n    yData,\n    fullLines,\n    fullLabels\n  };\n}\n\n// { [id]: [] }\nconst cache = {};\nlet currentId, currentIdx;\n\nfunction cachedOr(inputs, creator) {\n  const caller = new Error().stack.split('\\n')[2].trim();\n  const currentCache = cache[currentId] || (cache[currentId] = {});\n  const currentValue = currentCache[caller] || (currentCache[caller] = {});\n//  const currentValue = currentCache[currentIdx] || (currentCache.push({}), currentCache[currentIdx]);\n//  currentIdx += 1;\n  const cached = currentValue.inputs && currentValue.value && currentValue.inputs.length === inputs.length && inputs.reduce((acc, val, i) => acc && val === currentValue.inputs[i], true);\n  if (!cached) {\n    currentValue.inputs = inputs;\n    currentValue.value = creator();\n  }\n  return currentValue.value;\n}\n\nexport function genData({\n  id,\n  xData,\n  yData,\n  view /* [ start, end ] */,\n  viewPort /*: {\n    chart: {\n      x: [start, end],\n      y: [start, end]\n    },\n    finder: {\n      x: [start, end],\n      y: [start, end]\n    }\n  }*/,\n  time,\n  rerender\n}) {\n  currentId = id;\n  currentIdx = 0;\n\n  const pregen = pregenerate(xData, yData);\n  const currView = normalizedView(pregen, view[0], view[1], time);\n  return projectedView(\n    currView,\n    viewPort.chart.x[1],\n    viewPort.chart.y[1],\n    viewPort.finder.y[0],\n    viewPort.finder.y[1],\n  );\n}\n\n\n","/**\n * @typedef\n * @name VNode\n * @property {string} tagName\n * @property {Object} attributes\n * @property {(VNode | string)[]} children\n */\n\n/**\n *\n * @param {string} tagName\n * @param {Object?} attributes\n * @param {(VNode | string)[]} children\n *\n * @return {VNode}\n */\nexport function h(tagName, attributes = {}, children = []) {\n  return {\n    tagName,\n    attributes,\n    children\n  };\n}\n\n/**\n *\n * @param {ChildNode} element\n * @param {Object} attributes\n */\nfunction diffAttrs(element, attributes) {\n  const newAttrs = Object.keys(attributes);\n  const attrs = element.attributes;\n  for (let i = attrs.length - 1; i >= 0; i--) {\n    let name = attrs[i].name;\n    let value = attrs[i].value;\n    // if we already have the attribute, let's reuse it\n    if (attributes[name] !== undefined) {\n      newAttrs.splice(newAttrs.indexOf(name), 1);\n      if (\"\" + attributes[name] !== value) {\n        attrs[i].value = attributes[name];\n      }\n    } else {\n      // delete any not given\n      element.removeAttribute(name);\n    }\n  }\n  newAttrs.map(a => {\n    // event handlers\n    if (a[0] === \"o\" && a[1] === \"n\") {\n      const name = a.toLowerCase().substr(2);\n      if (!element._listen || !element._listen[name])\n        element.addEventListener(name, eventProxy, false);\n      (element._listen || (element._listen = {}))[name] = attributes[a];\n      // } else if (element[a] !== 'undefined') {\n      //   element[a] = attributes[a];\n    } else {\n      element.setAttribute(a, attributes[a]);\n    }\n  });\n}\n\nfunction eventProxy(e) {\n  return this._listen[e.type](e);\n}\n\nconst EMPTY_ARR = [];\n\n/**\n *\n * @param {ChildNode} parent\n * @param {(VNode | string)[]} nodes\n * @param {boolean?} isSvg\n * @return {SVGAElement}\n */\nexport function diff(parent, nodes, isSvg = false) {\n  const children = parent.childNodes;\n\n  let n,\n    i = 0,\n    len = nodes.length,\n    childI = 0,\n    isNew = false,\n    el;\n  for (; i < len; i++) {\n    n = nodes[i];\n    // skip null nodes\n    if (!n) continue;\n    // convert to string if it's not a normal node\n    n = n.tagName ? n : typeof n === \"string\" ? n : \"\" + n;\n    // svgs need namespace elements\n    isSvg = n.tagName === \"svg\" || isSvg;\n    // try to find the right element, delete any that are not in the node tree\n    el = children[childI++];\n    while (el != null && (el.tagName || \"#text\").toLowerCase() !== n.tagName) {\n      parent.removeChild(el);\n      el = children[childI++];\n    }\n    // create and append an element if we didn't find one\n    isNew = !el;\n    el =\n      el ||\n      (typeof n === \"string\"\n        ? document.createTextNode(n)\n        : isSvg\n        ? document.createElementNS(\"http://www.w3.org/2000/svg\", n.tagName)\n        : document.createElement(n.tagName));\n    if (typeof n === \"string\") {\n      // text node\n      el.data !== n && (el.data = n);\n    } else {\n      // normal element\n      diffAttrs(el, n.attributes);\n      diff(el, n.children, isSvg);\n    }\n    if (isNew) parent.appendChild(el);\n  }\n\n  for (; childI < children.length; childI++) {\n    parent.removeChild(children[childI]);\n  }\n}\n","import \"./styles.css\";\nimport { normalizeData, pregenerate, view, genData } from \"./data\";\nimport { h, diff } from \"./renderer\";\n\nconst maxChartY = 400;\nconst searchStartY = 450;\nconst searchEndY = 500;\n\nconst EMPTY_ARR = [];\n\nfunction coerceTouches(e) {\n  return e.changedTouches\n    ? EMPTY_ARR.slice.call(e.changedTouches)\n    : [{ identifier: 0, clientX: e.clientX, target: e.target }];\n}\n\nfunction createChart({ x, y, id, rerender, stacked, percentage }) {\n  let currentView = [0.0, 1.0];\n  const touches = {};\n  let svg = null;\n\n  function mouseDown(e) {\n    e.preventDefault();\n    coerceTouches(e).map(({ identifier, clientX, target }) => {\n      touches[identifier] = {\n        start: clientX,\n        target: target.classList[1] || \"\"\n      };\n    });\n  }\n\n  function mouseUp(e) {\n    e.preventDefault();\n    coerceTouches(e).map(({ identifier }) => {\n      delete touches[identifier];\n    });\n  }\n\n  function mouseMove(e) {\n    e.preventDefault();\n    if (Object.keys(touches).length > 0 && e.buttons === 1) {\n      // refresh svg if it got diffed to hell\n      if (!svg || !svg.clientWidth) {\n        svg = document.querySelector(\"svg\");\n      }\n      const { x: svgStart, width: svgWidth } = svg.getBoundingClientRect();\n\n      coerceTouches(e).map(t => {\n        // console.log(t);\n        const { identifier, clientX: current } = t;\n        const touch = touches[identifier];\n        const { start, target } = touch;\n\n        let delta = (current - svgStart - (start - svgStart)) / svgWidth;\n\n        const left = target === \"window\" || target === \"left\";\n        const right = target === \"window\" || target === \"right\";\n\n        if (left && currentView[0] + delta < 0) {\n          delta = -currentView[0];\n        }\n        if (right && currentView[1] + delta > 1) {\n          delta = 1 - currentView[1];\n        }\n        if (left && currentView[0] + delta > currentView[1] - 0.05) {\n          delta = currentView[1] - 0.05 - currentView[0];\n        }\n        if (right && currentView[1] + delta < currentView[0] + 0.05) {\n          delta = currentView[0] + 0.05 - currentView[1];\n        }\n\n        if (left) {\n          currentView[0] += delta;\n        }\n        if (right) {\n          currentView[1] += delta;\n        }\n\n        if (left || right) {\n          touch.start = start + delta * svgWidth;\n          rerender();\n        }\n      });\n    }\n  }\n  \n  document.body.addEventListener('mousemove', mouseMove);\n  document.body.addEventListener('touchmove', mouseMove);\n  document.body.addEventListener('mouseup', mouseUp);\n  document.body.addEventListener('touchend', mouseUp);\n\n  const gen = pregenerate(x, y);\n\n  return (time, width) => {\n    const data = genData({\n      xData: x,\n      yData: y,\n      view: currentView,\n      viewPort: {\n        chart: {\n          x: [0, width],\n          y: [0, maxChartY],\n        },\n        finder: {\n          x: [0, width],\n          y: [searchStartY, searchEndY],\n        }\n      }\n    })\n//    const data = normalizeData(\n//      view(gen, currentView[0], currentView[1], time),\n//      width,\n//      maxChartY,\n//      searchStartY,\n//      searchEndY\n//    );\n\n    const graph = h(\n      \"svg\",\n      {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        version: \"1.2\",\n        viewBox: [0, 0, width, searchEndY].join(\" \"),\n        class: \"graph\"\n      },\n      [\n        h(\"g\", {}, [\n          h(\n            \"g\",\n            { class: \"lines y-lines\" },\n            data.markers.map(m =>\n              h(\"line\", { x1: 0, x2: width, y1: m.pos, y2: m.pos })\n            )\n          ),\n          h(\n            \"g\",\n            { class: \"labels y-labels\" },\n            data.markers.map(m => h(\"text\", { x: 0, y: m.pos - 10 }, [m.text]))\n          ),\n          h(\"g\", { class: \"labels x-lines\" }, [\n            data.selection &&\n              h(\"line\", { x1: 200, x2: 200, y1: 0, y2: maxChartY })\n          ]),\n          h(\n            \"g\",\n            { class: \"labels x-labels\" },\n            data.shownLabels.map(l =>\n              h(\"text\", { x: l.pos, y: maxChartY }, [l.text])\n            )\n          ),\n          h(\n            \"g\",\n            { class: \"line-charts\" },\n            data.lines.map(line =>\n              h(\"polyline\", {\n                stroke: line.color,\n                class: \"line-chart\",\n                points: line.data.join(\" \")\n              })\n            )\n          )\n        ]),\n        h(\n          \"g\",\n          {\n            class: \"finder\"\n          },\n          [\n            h(\"rect\", {\n              x: data.view[0],\n              y: \"450\",\n              width: width - (width - data.view[1]) - data.view[0],\n              height: \"50\",\n              class: \"window-border\"\n            }),\n            h(\"rect\", {\n              x: data.view[0] + 5,\n              y: \"452\",\n              width: width - (width - data.view[1]) - data.view[0] - 10,\n              height: \"46\",\n              class: \"window\"\n            }),\n            ...data.smallLines.map(line =>\n              h(\"polyline\", {\n                stroke: line.color,\n                class: \"line-chart\",\n                points: line.data.join(\" \")\n              })\n            ),\n            h(\"rect\", {\n              x: \"0\",\n              y: \"450\",\n              width: data.view[0],\n              height: \"50\",\n              class: \"overlay\"\n            }),\n            h(\"rect\", {\n              x: data.view[1],\n              y: \"450\",\n              width: width - data.view[1],\n              height: \"50\",\n              class: \"overlay\"\n            }),\n            h(\"rect\", {\n              x: data.view[0] - 15,\n              y: \"450\",\n              width: 25,\n              height: \"50\",\n              class: \"handle left\",\n              onMouseDown: mouseDown,\n              onTouchStart: mouseDown\n            }),\n            h(\"rect\", {\n              x: data.view[1] - 10,\n              y: \"450\",\n              width: 25,\n              height: \"50\",\n              class: \"handle right\",\n              onMouseDown: mouseDown,\n              onTouchStart: mouseDown\n            }),\n            h(\"rect\", {\n              x: data.view[0] + 10,\n              y: \"450\",\n              width: width - (width - data.view[1]) - data.view[0] - 20,\n              height: \"50\",\n              class: \"handle window\",\n              onMouseDown: mouseDown,\n              onTouchStart: mouseDown\n            })\n          ]\n        )\n      ]\n    );\n\n    return h(\n      \"section\",\n      {\n        class: \"chart\",\n      },\n      [\n        h(\"header\", { class: \"header\" }, [h(\"h1\", {}, [\"Chart\"])]),\n        graph,\n        h(\n          \"footer\",\n          {},\n          data.lines.map(line =>\n            h(\"label\", { for: line.name }, [\n              h(\"input\", {\n                type: \"checkbox\",\n                class: \"outline\",\n                id: line.name,\n                checked: true\n              }),\n              line.name\n            ])\n          )\n        )\n      ]\n    );\n  };\n}\n\nconst parent = document.querySelector(\"main\");\nlet queued = [];\nlet charts = [];\nlet width = document.body.clientWidth;\nlet cache = [];\n\nfunction render(time) {\n  cache = charts.map((c, i) => queued.includes(i) || !cache[i] ? c(time, width -30) : cache[i]);\n  diff(parent, cache);\n  queued = [];\n}\n\nfunction queueRender(id) {\n  if (queued.includes(id)) return;\n  if (!queued.length)\n    requestAnimationFrame(render);\n  queued.push(id);\n}\n\nfunction queueAll() {\n  charts.map((_, i) => queueRender(i));\n}\n\nwindow.addEventListener(\"load\", () => {\n  width = document.body.clientWidth;\n  queueAll();\n});\n\nwindow.addEventListener(\"resize\", () => {\n  width = document.body.clientWidth;\n  queueAll();\n});\n\nfunction fetchCharts() {\n  Promise.all([1,2,3,4,5].map(nr => fetch(`./contest/${nr}/overview.json`)))\n    .then(res => Promise.all(res.map(res => res.json())))\n    .then(data => data.map(chart => {\n      const columns = chart.columns.map(([name, ...data]) => {\n        return {\n          color: chart.colors[name],\n          data: data,\n          name: chart.names[name],\n          type: chart.types[name]\n        };\n      });\n\n      const x = columns.find(c => c.type === \"x\");\n      const y = columns.filter(c => c !== x);\n      const id = charts.length;\n\n      charts.push(createChart({\n        x,\n        y,\n        stacked: !!chart.stacked,\n        y_scaled: !!chart.y_scaled,\n        percentage: !!chart.percentage,\n        id,\n        rerender: queueRender.bind(null, id),\n      }));\n\n      queueRender(id);\n    }));\n}\n\nfetchCharts();\n\n//fetch(\"./chart_data (3).json\")\n//  .then(res => res.json())\n//  .then(data => {\n//    charts = data.map(chart => {\n//      const columns = chart.columns.map(([name, ...data]) => {\n//        return {\n//          color: chart.colors[name],\n//          data: data,\n//          name: chart.names[name],\n//          type: chart.types[name]\n//        };\n//      });\n//\n//      const x = columns.find(c => c.type === \"x\");\n//      const y = columns.filter(c => c !== x);\n//\n//      return createChart({ x, y });\n//    });\n//\n//    queueRender();\n//  });\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}